#include "Timer.h"

#ifndef NOT_MATCH
#define NOT_MATCH
#endif

void Timer0_Init(void)
{
	SYSCTL_RCGCGPIO_R |= 0x00000001;
	while((SYSCTL_PRGPIO_R & 0x00000001) == 0) {};
	GPIO_PORTA_AFSEL_R |= 0x00000001;
	GPIO_PORTA_AMSEL_R &= ~0x00000001;
	GPIO_PORTA_PCTL_R = (GPIO_PORTA_PCTL_R & 0xFFFFFFF0) + 0x00000003;
	
	SYSCTL_RCGCTIMER_R |= 0x00000001;	
	while((SYSCTL_PRTIMER_R & 0x00000001) == 0){};
	TIMER0_CTL_R &= ~0x00000001; //disable Timer0A
	TIMER0_CFG_R = 0x00000000;		
#ifdef MATCH
	TIMER0_TAMR_R = 0x00000032; //periodic, count up, match interrupt
	
	TIMER0_TAMATCHR_R = 0x00001FFF;
	TIMER0_TAPMR_R = 0x00000000;
		
	TIMER0_ICR_R = 0x00000010;
	TIMER0_IMR_R = 0x00000010;
#else
	TIMER0_TAMR_R = 0x00000002; //periodic, count down
	
	TIMER0_TAILR_R = 0x0FFFFFFF;
	TIMER0_TAPR_R = 0x000000FF;
		
	TIMER0_ICR_R = 0x00000001;
	TIMER0_IMR_R |= 0x00000001;
#endif			
	NVIC_PRI4_R = (NVIC_PRI4_R & 0x00FFFFFF) + 0x40000000;
	NVIC_EN0_R = 1 << 19;
		
	TIMER0_CTL_R |= 0x00000001;	
		
}


